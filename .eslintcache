[{"D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\index.js":"1","D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\context\\user\\UserContext.js":"2","D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\pages\\shop\\CardShop.js":"3","D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\pages\\register\\RegisterPageStyles.js":"4","D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\pages\\main\\MainPage.js":"5","D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\utiels\\constans\\RESTConstans.js":"6","D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\workers\\blockWorker.js":"7","D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\models\\CardPackage.js":"8","D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\pages\\login\\LoginPage.js":"9","D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\reportWebVitals.js":"10","D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\models\\PokemonList.js":"11"},{"size":517,"mtime":1607953123348,"results":"12","hashOfConfig":"13"},{"size":91,"mtime":1610039672897,"results":"14","hashOfConfig":"13"},{"size":3510,"mtime":1610474101121,"results":"15","hashOfConfig":"13"},{"size":226,"mtime":1607953123353,"results":"16","hashOfConfig":"13"},{"size":5268,"mtime":1610039672908,"results":"17","hashOfConfig":"13"},{"size":373,"mtime":1610039672915,"results":"18","hashOfConfig":"13"},{"size":1052,"mtime":1610039672916,"results":"19","hashOfConfig":"13"},{"size":1040,"mtime":1610296917773,"results":"20","hashOfConfig":"13"},{"size":2068,"mtime":1610294168516,"results":"21","hashOfConfig":"13"},{"size":375,"mtime":1607953123354,"results":"22","hashOfConfig":"13"},{"size":1036,"mtime":1610465995399,"results":"23","hashOfConfig":"13"},{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},"r4h24f",{"filePath":"27","messages":"28","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"29"},{"filePath":"30","messages":"31","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"34","messages":"35","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"36","usedDeprecatedRules":"37"},{"filePath":"38","messages":"39","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"40"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"49"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\index.js",[],["52","53"],"D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\context\\user\\UserContext.js",[],["54","55"],"D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\pages\\shop\\CardShop.js",["56","57","58"],"D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\pages\\register\\RegisterPageStyles.js",[],"D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\pages\\main\\MainPage.js",["59","60"],"import * as crypto from \"crypto\";\r\n\r\nimport React, { useContext, useEffect, useState } from \"react\";\r\n\r\nimport Button from \"@material-ui/core/Button\";\r\n/* eslint-disable import/no-webpack-loader-syntax */\r\nimport DefaultWorker from \"worker-loader!../../workers/blockWorker.js\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport { Grid, Paper } from \"@material-ui/core\";\r\nimport RESTConstans from \"../../utiels/constans/RESTConstans\";\r\nimport { UserContext } from \"../../context/user/UserContext\";\r\nimport { useHistory } from \"react-router-dom\";\r\n\r\nconst useStyles = makeStyles((theme) => ({\r\n  grid: {\r\n    width: \"100%\",\r\n    margin: \"0px\",\r\n  },\r\n  paper: {\r\n    padding: theme.spacing(2),\r\n    textAlign: \"center\",\r\n  },\r\n}));\r\n\r\nexport default function MainPage() {\r\n  const { token } = useContext(UserContext);\r\n  const [userName, setUserName] = useState(\"\");\r\n  const [coins, setCoins] = useState(0);\r\n  const [worker, setWorker] = useState();\r\n  const [difficulty, setDifficulty] = useState();\r\n  const history = useHistory();\r\n\r\n  //######################## UI - ELEMENTE ############################################\r\n\r\n  const classes = useStyles();\r\n  /**\r\n   * Beim First render werden Username + CoinAmount gefetcht\r\n   * und der blockWorker initialisiert\r\n   * UI-Element Username\r\n   */\r\n  useEffect(() => {\r\n    fetchUserName();\r\n    fetchCoins();\r\n    fetchDifficulty();\r\n    initBlockWorker();\r\n  }, []);\r\n\r\n  //###################################################################################\r\n\r\n  const mineCoins = () => {\r\n    collectInfoForBlock();\r\n  };\r\n\r\n  const goToShop = () => {\r\n    history.push(\"/cardShop\"); //hängt an aktuelle UL drann\r\n  };\r\n\r\n  async function collectInfoForBlock() {\r\n    // Letzten Block holen und hash rausziehen\r\n    fetchDifficulty();\r\n    const lastBlock = await fetchData(\r\n      RESTConstans.DOMAIN + RESTConstans.LASTBLOCK\r\n    );\r\n    const prevBlockHash = lastBlock.hash;\r\n    //neuen Block bauen mit hash als prevHash\r\n    const newBlock = buildBlock(prevBlockHash);\r\n    //Block wird zum minen dem blockWorker übergeben\r\n    const workerEvent = { block: { ...newBlock }, difficulty: difficulty };\r\n    worker.postMessage(workerEvent);\r\n  }\r\n\r\n  function buildBlock(prevHash) {\r\n    const newBlock = {\r\n      previousHash: prevHash,\r\n      data: \"Sieben Schneeschipper schippen sieben Schippen Schnee.\",\r\n      timestamp: Date.now(),\r\n      nonce: 0,\r\n    };\r\n    return newBlock;\r\n  }\r\n\r\n  async function postOurBlock(postBlock) {\r\n    const response = await postData(\r\n      RESTConstans.DOMAIN + RESTConstans.BLOCKS,\r\n      postBlock\r\n    ).then(() => {\r\n      fetchCoins();\r\n    });\r\n    console.log(\"response\", response);\r\n    return response;\r\n  }\r\n\r\n  function initBlockWorker() {\r\n    const tempWorker = new DefaultWorker();\r\n    tempWorker.onmessage = (event) => {\r\n      const postBlock = { ...event.data };\r\n      console.log(\"Mein Block\" + JSON.stringify(postBlock));\r\n      postOurBlock(postBlock);\r\n    };\r\n    setWorker(tempWorker);\r\n    return () => {\r\n      tempWorker.terminate();\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Coins-amount wird gefecht und im Sate gespeichert\r\n   */\r\n  async function fetchCoins() {\r\n    const response = await fetchData(RESTConstans.DOMAIN + RESTConstans.COINS);\r\n    setCoins(response.amount);\r\n  }\r\n  /**\r\n   * Aktueller UserName wird gefecht und gespeichert\r\n   */\r\n  async function fetchUserName() {\r\n    const response = await fetchData(RESTConstans.DOMAIN + RESTConstans.ME);\r\n    setUserName(response.username);\r\n  }\r\n\r\n  async function fetchDifficulty() {\r\n    const response = await fetchData(\r\n      RESTConstans.DOMAIN + RESTConstans.DIFFICULTY\r\n    );\r\n    setDifficulty(response);\r\n    console.log(\"response nach dem Fetch\", response);\r\n    console.log(\"difficulty\" + difficulty);\r\n  }\r\n\r\n  /**\r\n   * fetchen ausgelagert\r\n   *\r\n   * @param {*} url\r\n   */\r\n  async function fetchData(url) {\r\n    const response = await fetch(url, {\r\n      method: \"GET\",\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        token: token,\r\n      },\r\n    }).then((response) => response.json());\r\n\r\n    return response;\r\n  }\r\n  /**\r\n   *\r\n   * Posten einen Blocks ausgelagert\r\n   * @param {*} url\r\n   * @param {*} Block\r\n   */\r\n  async function postData(url, Block) {\r\n    const response = await fetch(url, {\r\n      method: \"POST\",\r\n      body: JSON.stringify(Block),\r\n      headers: {\r\n        Accept: \"application/json\",\r\n        \"Content-Type\": \"application/json\",\r\n        token: token,\r\n      },\r\n    }).then((response) => response.json());\r\n    return response;\r\n  }\r\n\r\n  return (\r\n    <Grid container spacing={3} className={classes.grid}>\r\n      <Grid item xs={12}>\r\n        <Paper className={classes.paper}>Mining Station</Paper>\r\n      </Grid>\r\n\r\n      <Grid item xs={9}>\r\n        <Paper className={classes.paper}>\r\n          <Button variant=\"contained\" color=\"primary\" onClick={mineCoins}>\r\n            Start Mining\r\n          </Button>\r\n          <Button variant=\"contained\" color=\"primary\" onClick={goToShop}>\r\n            CardShop\r\n          </Button>\r\n        </Paper>\r\n      </Grid>\r\n\r\n      <Grid item xs={3}>\r\n        {userName} - Pokecoins ({coins})\r\n      </Grid>\r\n    </Grid>\r\n  );\r\n}\r\n",["61","62"],"D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\utiels\\constans\\RESTConstans.js",[],["63","64"],"D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\workers\\blockWorker.js",[],"D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\models\\CardPackage.js",[],"D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\pages\\login\\LoginPage.js",["65"],"D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\reportWebVitals.js",[],["66","67"],"D:\\Hochschule Rheinmain\\Web-Engineering\\Pokecoin\\src\\models\\PokemonList.js",["68"],{"ruleId":"69","replacedBy":"70"},{"ruleId":"71","replacedBy":"72"},{"ruleId":"69","replacedBy":"73"},{"ruleId":"71","replacedBy":"74"},{"ruleId":"75","severity":1,"message":"76","line":1,"column":16,"nodeType":"77","messageId":"78","endLine":1,"endColumn":21},{"ruleId":"75","severity":1,"message":"79","line":3,"column":8,"nodeType":"77","messageId":"78","endLine":3,"endColumn":13},{"ruleId":"80","severity":1,"message":"81","line":56,"column":6,"nodeType":"82","endLine":56,"endColumn":8,"suggestions":"83"},{"ruleId":"75","severity":1,"message":"84","line":1,"column":13,"nodeType":"77","messageId":"78","endLine":1,"endColumn":19},{"ruleId":"80","severity":1,"message":"85","line":46,"column":6,"nodeType":"82","endLine":46,"endColumn":8,"suggestions":"86"},{"ruleId":"69","replacedBy":"87"},{"ruleId":"71","replacedBy":"88"},{"ruleId":"69","replacedBy":"89"},{"ruleId":"71","replacedBy":"90"},{"ruleId":"75","severity":1,"message":"91","line":11,"column":11,"nodeType":"77","messageId":"78","endLine":11,"endColumn":16},{"ruleId":"69","replacedBy":"92"},{"ruleId":"71","replacedBy":"93"},{"ruleId":"75","severity":1,"message":"76","line":1,"column":16,"nodeType":"77","messageId":"78","endLine":1,"endColumn":21},"no-native-reassign",["94"],"no-negated-in-lhs",["95"],["94"],["95"],"no-unused-vars","'Paper' is defined but never used.","Identifier","unusedVar","'react' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'fetchCoins', 'fetchPackages', and 'fetchUserName'. Either include them or remove the dependency array.","ArrayExpression",["96"],"'crypto' is defined but never used.","React Hook useEffect has missing dependencies: 'fetchCoins', 'fetchDifficulty', 'fetchUserName', and 'initBlockWorker'. Either include them or remove the dependency array.",["97"],["94"],["95"],["94"],["95"],"'token' is assigned a value but never used.",["94"],["95"],"no-global-assign","no-unsafe-negation",{"desc":"98","fix":"99"},{"desc":"100","fix":"101"},"Update the dependencies array to be: [fetchCoins, fetchPackages, fetchUserName]",{"range":"102","text":"103"},"Update the dependencies array to be: [fetchCoins, fetchDifficulty, fetchUserName, initBlockWorker]",{"range":"104","text":"105"},[1671,1673],"[fetchCoins, fetchPackages, fetchUserName]",[1431,1433],"[fetchCoins, fetchDifficulty, fetchUserName, initBlockWorker]"]